<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartRepAI</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>


    <style>
        /* Base styles */
        :root {
            --bg-primary: #1A2C4A;
            --text-primary: #FFFFFF;
            --text-secondary: #9CA3AF;
            --card-bg: #FFFFFF;
            --card-text: #1F2937;
            --subtle-button-bg: rgba(255, 255, 255, 0.1);
            --home-button-bg: #FFFFFF;
            --home-button-text: #1A2C4A;
            --home-button-icon-color: #4B5563;
            --logout-bg: rgba(239, 68, 68, 0.1);
            --logout-text: #F87171;
            --suggestion-border: #e5e7eb;
            --suggestion-hover-bg: #e5e7eb;
            --suggestion-hover-text: #1f2937;
        }

        [data-theme="light"] {
            --bg-primary: #F3F4F6;
            --text-primary: #1F2937;
            --text-secondary: #6B7280;
            --card-bg: #FFFFFF;
            --card-text: #1F2937;
            --subtle-button-bg: rgba(0, 0, 0, 0.05);
            --home-button-bg: #1A2C4A;
            --home-button-text: #FFFFFF;
            --home-button-icon-color: #9CA3AF;
            --logout-bg: rgba(239, 68, 68, 0.1);
            --logout-text: #EF4444;
            --suggestion-border: #d1d5db;
            --suggestion-hover-bg: #d1d5db;
            --suggestion-hover-text: #1f2937;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        /* Page display logic */
        .page { display: none; }
        .page.active { display: flex; }

        /* Card styles */
        .card {
            background-color: var(--card-bg);
            border-radius: 1.5rem;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.05), 0 8px 10px -6px rgba(0, 0, 0, 0.05);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            color: var(--card-text);
        }
        .form-label { font-weight: 600; margin-bottom: 0.75rem; display: block; }
        .text-input, .dropdown, .textarea {
            width: 100%; padding: 0.75rem 1rem; border-radius: 0.75rem;
            border: 1px solid #D1D5DB; background-color: #F9FAFB;
            color: #1A2C4A; font-weight: 500; resize: vertical;
        }
        .text-input::placeholder, .textarea::placeholder { color: #9CA3AF; }
        .checkbox-label { font-weight: 500; }
        .cta-button {
            background-color: var(--home-button-bg); color: var(--home-button-text); font-weight: 700;
            padding: 1rem; border-radius: 1rem; text-align: center; width: 100%;
            box-shadow: 0 4px 14px 0 rgba(0, 0, 0, 0.1);
            transition: all 0.2s ease;
        }
        .cta-button:hover { opacity: 0.9; }
        .cta-button:disabled { background-color: #E5E7EB; color: #9CA3AF; cursor: not-allowed; }
        
        .home-nav-button {
            background-color: var(--home-button-bg);
            color: var(--home-button-text);
        }
        .home-nav-button svg {
            color: var(--home-button-icon-color);
        }
        .home-nav-button:hover {
             opacity: 0.9;
        }
        
        /* Toggle Switch */
        .switch { position: relative; display: inline-block; width: 50px; height: 28px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider-round { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 34px; }
        .slider-round:before { position: absolute; content: ""; height: 20px; width: 20px; left: 4px; bottom: 4px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider-round { background-color: #3B82F6; }
        input:checked + .slider-round:before { transform: translateX(22px); }
        
        /* Chat styles */
        .chat-bubble { max-width: 80%; padding: 0.75rem 1rem; border-radius: 1rem; white-space: pre-wrap; word-wrap: break-word; }
        .user-bubble { background-color: #3B82F6; color: white; align-self: flex-end; }
        .ai-bubble { background-color: #E5E7EB; color: #1F2937; align-self: flex-start; }
        
        /* Success message */
        .success-toast {
            position: fixed;
            bottom: -100px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #10B981;
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 0.75rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transition: bottom 0.5s ease-in-out;
            z-index: 100;
        }
        .success-toast.show {
            bottom: 20px;
        }

        /* Theme toggle icons */
        #theme-toggle-button .sun-icon { display: none; }
        body[data-theme="light"] #theme-toggle-button .sun-icon { display: block; }
        body[data-theme="light"] #theme-toggle-button .moon-icon { display: none; }
        
        .suggestion-btn {
            background-color: transparent;
            color: var(--card-text);
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.875rem;
            border: 1px solid var(--suggestion-border);
            transition: all 0.2s;
        }
        .suggestion-btn:hover {
            background-color: var(--suggestion-hover-bg);
            color: var(--suggestion-hover-text);
            border-color: transparent;
        }
    </style>
</head>
<body data-theme="dark">

    <!-- Home Screen Page -->
<header class="mb-8 w-full">
    <div id="user-status-container" class="flex justify-between items-center">
        <form id="login-form" class="w-full flex items-center gap-2">
            <input type="email" id="email-input" placeholder="Email" class="text-input text-sm py-1 flex-grow" required>
            <input type="password" id="password-input" placeholder="Password" class="text-input text-sm py-1 flex-grow" required>
            <button type="submit" class="py-1 px-3 rounded-lg text-sm font-semibold hover:opacity-80 transition-opacity" style="color: var(--text-primary); background-color: var(--subtle-button-bg);">Login / Sign Up</button>
        </form>
        <div id="user-info" class="hidden w-full flex justify-between items-center">
            <p id="user-email-display" class="text-sm font-medium"></p>
            <button id="logout-button" class="py-1 px-3 rounded-lg text-sm font-semibold hover:opacity-80 transition-opacity" style="color: var(--text-primary); background-color: var(--subtle-button-bg);">Logout</button>
        </div>
     </div>
    <div class="flex justify-end mt-2">
        <a href="#" data-target="settings-page" class="nav-link hover:opacity-80 transition-opacity">
            <svg xmlns="http://www.w.org/2000/svg" class="h-8 w-8" style="color: var(--text-primary);" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
            </svg>
        </a>
    </div>
    <h1 class="text-3xl font-bold text-center mt-4">SmartRepAI</h1>
</header>

        <main class="flex-grow w-full pb-24">
            <div class="space-y-4">
                <a href="#" data-target="role-play-page" class="nav-link flex items-center p-4 rounded-xl shadow-md transition-all duration-300 transform hover:scale-105 home-nav-button">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 mr-4 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" /></svg>
                    <span class="text-lg font-semibold whitespace-nowrap">HCP Role Play</span>
                </a>
                 <a href="#" data-target="verbalization-page" class="nav-link flex items-center p-4 rounded-xl shadow-md transition-all duration-300 transform hover:scale-105 home-nav-button">
                   <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 mr-4 flex-shrink-0" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z" clip-rule="evenodd" /></svg>
                    <span class="text-lg font-semibold whitespace-nowrap">Verbalization</span>
                </a>
                <a href="#" data-target="knowledge-base-page" class="nav-link flex items-center p-4 rounded-xl shadow-md transition-all duration-300 transform hover:scale-105 home-nav-button">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 mr-4 flex-shrink-0" viewBox="0 0 20 20" fill="currentColor"><path d="M9 4.804A7.968 7.968 0 005.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 015.5 16c1.255 0 2.443-.29 3.5-.804V4.804zM14.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 0114.5 16c1.255 0 2.443-.29 3.5-.804v-10A7.968 7.968 0 0014.5 4z" /></svg>
                    <span class="text-lg font-semibold whitespace-nowrap">Knowledge base</span>
                </a>
                <a href="#" data-target="questions-page" class="nav-link flex items-center p-4 rounded-xl shadow-md transition-all duration-300 transform hover:scale-105 home-nav-button">
                     <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 mr-4 flex-shrink-0" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd" /></svg>
                    <span class="text-lg font-semibold whitespace-nowrap">Questions From The Field</span>
                </a>
                <a href="#" data-target="coaching-tips-page" class="nav-link flex items-center p-4 rounded-xl shadow-md transition-all duration-300 transform hover:scale-105 home-nav-button">
                     <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 mr-4 flex-shrink-0" viewBox="0 0 20 20" fill="currentColor"><path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z" /></svg>
                    <span class="text-lg font-semibold whitespace-nowrap">Coaching Tips</span>
                </a>
            </div>
        </main>
        <footer class="absolute bottom-6 right-6">
             <a href="#" class="flex flex-col items-center hover:opacity-80 transition-opacity">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" style="color: var(--text-primary)" viewBox="0 0 20 20" fill="currentColor"><path d="M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" /></svg>
                <span class="text-xs font-semibold mt-1" style="color: var(--text-primary)">Saved Scripts</span>
            </a>
        </footer>
    </div>

    <!-- Role Play Setup Page -->
    <div id="role-play-page" class="page max-w-md mx-auto p-4 min-h-screen flex-col">
        <header class="grid grid-cols-2 items-center py-4 w-full">
            <div class="justify-self-start">
                 <a href="#" data-target="home-page" class="nav-link p-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--text-primary)"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>
                 </a>
            </div>
        </header>
        <main class="flex-grow w-full">
            <div class="card">
                <h2 class="text-lg font-bold mb-6 text-center">Persona Customization</h2>
                <div><label for="hcp-name" class="form-label text-center">HCP Name (Optional)</label><input type="text" id="hcp-name" class="text-input" placeholder="e.g., Dr. Evelyn Reed"></div>
                <div class="mt-4"><label for="product" class="form-label text-center">Product</label><select id="product" class="dropdown"><option>Rinvoq</option><option>Skyrizi</option><option>Humira</option></select></div>
                <div class="mt-4"><label for="specialty" class="form-label text-center">Specialty</label><select id="specialty" class="dropdown"><option>Rheumatology</option><option>Gastroenterology</option><option>Dermatology</option><option>Pediatrics</option></select></div>
                <div class="mt-6"><label for="prescribing-habits" class="form-label text-center">Prescribing Habits</label><input type="text" id="prescribing-habits" class="text-input" placeholder="e.g., Prefers biosimilars..."></div>
                <div class="mt-6"><label for="personality" class="form-label text-center">Personality</label><select id="personality" class="dropdown"><option>Navigator</option><option>Traditionalist</option><option>HOT Target</option></select></div>
                <div class="mt-6"><label class="form-label text-center">Key Concerns</label><div class="space-y-3"><div class="flex items-center"><input id="concern-safety" type="checkbox" class="h-5 w-5 rounded text-blue-600 focus:ring-blue-500 border-gray-300"><label for="concern-safety" class="ml-3 checkbox-label">Safety</label></div><div class="flex items-center"><input id="concern-efficacy" type="checkbox" class="h-5 w-5 rounded text-blue-600 focus:ring-blue-500 border-gray-300" checked><label for="concern-efficacy" class="ml-3 checkbox-label">Efficacy</label></div><div class="flex items-center"><input id="concern-access" type="checkbox" class="h-5 w-5 rounded text-blue-600 focus:ring-blue-500 border-gray-300"><label for="concern-access" class="ml-3 checkbox-label">Access</label></div></div></div>
            <div class="mt-6">
                <label for="roleplay-file" class="form-label text-center">Reference Document (Optional)</label>
                <input type="file" id="roleplay-file" class="text-sm">
            </div>

                <h2 class="text-lg font-bold mt-8 mb-6 pt-6 border-t border-gray-200 text-center">Scenario Details</h2>
                <div><textarea id="scenario" class="textarea" rows="4" placeholder="e.g., Handling objections to cost..."></textarea></div>
            </div>
        </main>
        <footer class="py-4 w-full">
            <div class="flex items-center justify-between mb-4">
                 <div class="flex items-center space-x-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--text-primary)"><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" y1="19" x2="12" y2="23"></line></svg>
                    <span class="font-medium">Voice</span>
                    <label class="switch"><input type="checkbox" checked><span class="slider-round"></span></label>
                    <span class="font-medium text-gray-400">Text</span>
                 </div>
                 <a href="#" class="flex items-center space-x-2 text-sm font-medium text-gray-300 hover:text-white">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-300"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline></svg>
                    <span>Save Template</span>
                 </a>
            </div>
            <button id="start-roleplay-button" class="cta-button">Start Role Play Simulation</button>
        </footer>
    </div>

    <!-- Verbalization Page -->
    <div id="verbalization-page" class="page max-w-md mx-auto p-4 min-h-screen flex-col">
        <header class="mb-4 w-full">
            <div class="flex justify-start items-center h-8">
                 <a href="#" data-target="home-page" class="nav-link p-2 -ml-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--text-primary)"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>
                 </a>
            </div>
            <h1 class="text-xl font-bold text-center">Verbalization</h1>
        </header>
        <main id="verbalization-chat-history" class="flex-grow w-full space-y-4 flex flex-col overflow-y-auto pb-4">
            </main>
        <footer class="py-4 w-full">
            <form id="verbalization-chat-form" class="flex items-center space-x-2">
                <input type="text" id="verbalization-chat-input" class="text-input flex-grow" placeholder="Type your message...">
                <button type="submit" id="verbalization-send-button" class="bg-blue-600 hover:bg-blue-700 text-white font-bold p-3 rounded-full transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
                </button>
            </form>
        </footer>
    </div>
    
    <!-- Knowledge Base Page -->
    <div id="knowledge-base-page" class="page max-w-md mx-auto p-4 min-h-screen flex-col">
        <header class="grid grid-cols-3 items-center py-4 w-full">
            <div class="justify-self-start">
                <a href="#" data-target="home-page" class="nav-link p-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--text-primary)"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>
                </a>
            </div>
            <h1 class="text-xl font-bold justify-self-center whitespace-nowrap">Knowledge Base</h1>
            <div></div>
        </header>

        <div class="card mb-4">
            <h3 class="font-semibold text-center mb-2">Add to Knowledge Base</h3>
                <form id="upload-knowledge-form" class="flex items-center gap-2">
                    <input type="file" id="knowledge-file-input" class="text-sm" accept=".pdf" required>
                    <button type="submit" class="py-1 px-4 rounded-lg text-sm font-semibold text-white bg-blue-600 hover:bg-blue-700 transition-opacity">Upload</button>
                </form>
        </div>

        <main id="kb-chat-history" class="flex-grow w-full space-y-4 flex flex-col overflow-y-auto pb-4">
            </main>

        <footer class="py-4 w-full">
            <form id="kb-chat-form" class="flex items-center space-x-2">
                
                <button type="button" id="kb-mic-button" class="p-2 hover:opacity-70">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" style="color: var(--text-primary);" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-14 0m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"></path></svg>
                </button>

                <input type="text" id="kb-chat-input" class="text-input flex-grow" placeholder="Ask a question...">

                <button type="submit" id="kb-send-button" class="bg-blue-600 hover:bg-blue-700 text-white font-bold p-3 rounded-full transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
                </button>

            </form>
        </footer>
    </div>

    <!-- Questions From The Field Page -->
    <div id="questions-page" class="page max-w-md mx-auto p-4 min-h-screen flex-col">
        <header class="grid grid-cols-3 items-center py-4 w-full">
            <div class="justify-self-start">
                 <a href="#" data-target="home-page" class="nav-link p-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--text-primary)"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>
                 </a>
            </div>
            <h1 class="text-xl font-bold justify-self-center whitespace-nowrap">Questions From The Field</h1>
            <div></div>
        </header>
        <main class="flex-grow w-full">
            <div class="card">
                <form id="field-question-form">
                    <div class="mb-6">
                        <label for="q-product" class="form-label text-center">Product</label>
                        <select id="q-product" class="dropdown">
                            <option>Therapy 1</option>
                            <option>Therapy 2</option>
                            <option>Therapy 3</option>
                        </select>
                    </div>
                    <div class="mb-6">
                        <label for="q-indication" class="form-label text-center">Indication</label>
                        <select id="q-indication" class="dropdown">
                            <option>Indication 1</option>
                            <option>Indication 2</option>
                            <option>Indication 3</option>
                        </select>
                    </div>
                    <div>
                         <label for="q-details" class="form-label text-center">What is the question?</label>
                         <textarea id="q-details" class="textarea" rows="8" placeholder="Enter the question from the healthcare professional..."></textarea>
                    </div>
                </form>
            </div>
        </main>
        <footer class="py-4 w-full">
            <button id="submit-question-button" class="cta-button">Submit Question</button>
        </footer>
    </div>

    <!-- Coaching Tips Page -->
    <div id="coaching-tips-page" class="page max-w-md mx-auto p-4 min-h-screen flex-col">
        <header class="grid grid-cols-3 items-center py-4 w-full">
            <div class="justify-self-start">
                 <a href="#" data-target="home-page" class="nav-link p-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--text-primary)"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>
                 </a>
            </div>
            <h1 class="text-xl font-bold justify-self-center whitespace-nowrap">Coaching Tips</h1>
            <div></div>
        </header>
        <main class="w-full">
            <div class="flex justify-end mb-4">
                <select id="sort-coaching-tips" class="dropdown w-auto text-sm">
                    <option value="newest">Sort by Newest</option>
                    <option value="oldest">Sort by Oldest</option>
                </select>
            </div>
            <div id="coaching-tips-list" class="space-y-4">
                </div>
        </main>
    </div>

     <!-- Feedback Details Page -->
    <div id="feedback-details-page" class="page max-w-md mx-auto p-4 min-h-screen flex-col">
        <header class="grid grid-cols-3 items-center py-4 w-full">
            <div class="justify-self-start">
                 <a href="#" data-target="coaching-tips-page" class="nav-link p-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--text-primary)"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>
                 </a>
            </div>
            <h1 class="text-xl font-bold justify-self-center whitespace-nowrap">Session Feedback</h1>
            <div></div>
        </header>
        <main class="w-full">
            <div class="card">
                <h2 id="feedback-title" class="text-lg font-bold mb-2"></h2>
                <p id="feedback-date" class="text-sm text-gray-500 mb-4"></p>
                <div id="feedback-content" class="text-gray-700 space-y-2" style="white-space: pre-wrap;"></div>
            </div>
        </main>
    </div>
    
    <!-- Settings Page -->
    <div id="settings-page" class="page max-w-md mx-auto p-4 min-h-screen flex-col">
        <header class="grid grid-cols-3 items-center py-4 w-full">
            <div class="justify-self-start">
                 <a href="#" data-target="home-page" class="nav-link p-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--text-primary)"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>
                 </a>
            </div>
            <h1 class="text-xl font-bold justify-self-center whitespace-nowrap">Settings</h1>
            <div class="justify-self-end">
                <button id="theme-toggle-button" class="p-2 rounded-full hover:opacity-80 transition-opacity">
                    <svg class="sun-icon h-6 w-6" style="color: var(--text-primary)" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.707.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" clip-rule="evenodd" /></svg>
                    <svg class="moon-icon h-6 w-6" style="color: var(--text-primary)" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/></svg>
                </button>
            </div>
        </header>
        <main class="w-full flex-grow">
            <div class="space-y-6">
                <div class="card">
                    <h2 class="text-lg font-bold mb-4">Profile</h2>
                    <div class="flex items-center space-x-4">
                        <div class="w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center text-white text-2xl font-bold">
                            <span>JD</span>
                        </div>
                        <div>
                            <p class="font-semibold">Jane Doe</p>
                            <p class="text-sm text-gray-500">jane.doe@smartrep.ai</p>
                        </div>
                    </div>
                </div>

                <div class="card">
                     <h2 class="text-lg font-bold mb-4">Preferences</h2>
                    <div class="flex items-center justify-between">
                        <label for="notifications-toggle" class="font-medium">Push Notifications</label>
                        <label class="switch">
                            <input type="checkbox" id="notifications-toggle" checked>
                            <span class="slider-round"></span>
                        </label>
                    </div>
                </div>

                <div class="card">
                     <h2 class="text-lg font-bold mb-4">Personalization</h2>
                     <div class="space-y-4">
                        <div>
                            <label for="ai-personality" class="form-label">AI Personality</label>
                            <textarea id="ai-personality" class="textarea" rows="2" placeholder="e.g., A helpful and encouraging coach..."></textarea>
                            <div class="flex flex-wrap gap-2 mt-2">
                                <button type="button" class="suggestion-btn" data-target="ai-personality">Coach</button>
                                <button type="button" class="suggestion-btn" data-target="ai-personality">Educator</button>
                                <button type="button" class="suggestion-btn" data-target="ai-personality">Collaborator</button>
                            </div>
                        </div>
                        <div>
                            <label for="info-delivery" class="form-label">Information Delivery</label>
                            <textarea id="info-delivery" class="textarea" rows="2" placeholder="e.g., Be concise and use bullet points..."></textarea>
                             <div class="flex flex-wrap gap-2 mt-2">
                                <button type="button" class="suggestion-btn" data-target="info-delivery">Concise</button>
                                <button type="button" class="suggestion-btn" data-target="info-delivery">Detailed</button>
                                <button type="button" class="suggestion-btn" data-target="info-delivery">Socratic</button>
                            </div>
                        </div>
                        <div>
                            <label for="user-name" class="form-label">Your Name</label>
                            <input type="text" id="user-name" class="text-input" value="Jane Doe">
                        </div>
                        <div>
                            <label for="user-experience" class="form-label">Previous Experience</label>
                            <textarea id="user-experience" class="textarea" rows="3" placeholder="e.g., 5 years in biotech sales..."></textarea>
                        </div>
                        <div>
                            <label for="selling-style" class="form-label">Selling Style</label>
                            <select id="selling-style" class="dropdown">
                                <option>Challenger</option>
                                <option>Relationship Builder</option>
                                <option>Problem Solver</option>
                            </select>
                        </div>
                        <button id="save-personalization" class="cta-button w-full mt-2">Save Personalization</button>
                    </div>
                </div>

                <div class="card">
                     <h2 class="text-lg font-bold mb-4">About & Support</h2>
                     <div class="space-y-2">
                        <a href="#" class="flex items-center justify-between py-2 text-gray-700 hover:text-blue-600">
                            <span>Help Center</span>
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>
                        </a>
                         <a href="#" class="flex items-center justify-between py-2 text-gray-700 hover:text-blue-600">
                            <span>Privacy Policy</span>
                             <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>
                        </a>
                         <a href="#" class="flex items-center justify-between py-2 text-gray-700 hover:text-blue-600">
                            <span>Terms of Service</span>
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>
                        </a>
                    </div>
                </div>
            </div>
        </main>
         <footer class="py-4 w-full">
            <button class="w-full text-center py-3 rounded-lg font-semibold transition-colors" style="background-color: var(--logout-bg); color: var(--logout-text);">
                Log Out
            </button>
        </footer>
    </div>
    
    <div id="success-toast" class="success-toast">
        </div>

    <script>
        // --- Supabase Client Initialization & Auth Logic (MUST BE FIRST) ---
    const supaUrl = 'https://sckbcgxrebtmxozplmke.supabase.co';
    const supaAnonKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNja2JjZ3hyZWJ0bXhvenBsbWtlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTEyMDIwNjcsImV4cCI6MjA2Njc3ODA2N30.rCsHHG832qIKbrxxEvkIGVxCLpXJsd-NbCKvXgR_sxs';
    const supabaseClient = supabase.createClient(supaUrl, supaAnonKey);

    const loginForm = document.getElementById('login-form');
    const logoutButton = document.getElementById('logout-button');
    const userInfo = document.getElementById('user-info');
    const userEmailDisplay = document.getElementById('user-email-display');
        
    loginForm.addEventListener('submit', async (event) => {
        event.preventDefault();
        const email = document.getElementById('email-input').value;
        const password = document.getElementById('password-input').value;
        const { error: signInError } = await supabaseClient.auth.signInWithPassword({ email, password });
        if (signInError) {
            const { error: signUpError } = await supabaseClient.auth.signUp({ email, password });
            if (signUpError) alert(signUpError.message);
        }
    });

    logoutButton.addEventListener('click', () => supabaseClient.auth.signOut());

    supabaseClient.auth.onAuthStateChange((_event, session) => {
        if (session && session.user) {
            userInfo.classList.remove('hidden');
            loginForm.classList.add('hidden');
            userEmailDisplay.textContent = session.user.email;
        } else {
            userInfo.classList.add('hidden');
            loginForm.classList.remove('hidden');
        }
    });

    // --- Handle Knowledge Upload ---
    const uploadForm = document.getElementById('upload-knowledge-form');
    uploadForm.addEventListener('submit', async (event) => {
        event.preventDefault();
        const fileInput = document.getElementById('knowledge-file-input');
        const file = fileInput.files[0];
        if (!file) {
            alert("Please select a file to upload.");
            return;
        }

        const { data: { session } } = await supabaseClient.auth.getSession();
        if (!session) {
            alert("You must be logged in to upload files.");
            return;
        }

        const formData = new FormData();
        formData.append('file', file);

        try {
            const response = await fetch('/api/upload-knowledge', {
                method: 'POST',
                headers: {
                    'Authorization': `Bearer ${session.access_token}`
                },
                body: formData
            });

            const result = await response.json();
            if (!response.ok) {
                throw new Error(result.error || "File upload failed.");
            }
            alert(result.message); 
        } catch (error) {
            alert(error.message);
        } finally {
            fileInput.value = '';
        }
    });

    // --- Original Application Logic (Wrapped in DOMContentLoaded) ---
    // --- Role-Play File Handling ---
    const startRoleplayButton = document.getElementById('start-roleplay-button');
    startRoleplayButton.addEventListener('click', async () => {
        const fileInput = document.getElementById('roleplay-file');
        const file = fileInput.files[0];
        let fileContentForPrompt = "";

        if (file) {
            // This reads the content of a text-based file.
            fileContentForPrompt = await file.text();
            console.log("Reference document loaded.");
        }

        alert("Starting role play! The content from your reference document has been loaded and will be used to inform the AI's persona.");

    });

    document.addEventListener('DOMContentLoaded', () => {
        const pages = document.querySelectorAll('.page');
        const navLinks = document.querySelectorAll('.nav-link');
        const successToast = document.getElementById('success-toast');

        const showPage = (pageId) => {
            pages.forEach(page => {
                page.classList.toggle('active', page.id === pageId);
            });
            window.scrollTo(0, 0);
        };

        navLinks.forEach(link => {
            link.addEventListener('click', (event) => {
                event.preventDefault();
                const targetPageId = link.dataset.target;
                if (targetPageId) {
                    showPage(targetPageId);
                    if (targetPageId === 'knowledge-base-page' && !kbChatInitialized) {
                        initKnowledgeBaseChat();
                    }
                    if (targetPageId === 'coaching-tips-page') {
                        populateCoachingTips();
                    }
                    if (targetPageId === 'verbalization-page' && !verbalizationChatInitialized) {
                        initVerbalizationChat();
                    }
                }
            });
        });

        // --- Voice Recognition ---
        const kbMicButton = document.getElementById('kb-mic-button');
        const kbChatInput = document.getElementById('kb-chat-input');

        // Check if the browser supports the Web Speech API
        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        if (SpeechRecognition) {
            const recognition = new SpeechRecognition();
            
            kbMicButton.addEventListener('click', () => {
                try {
                    recognition.start();
                } catch(e) {
                    console.error("Speech recognition error:", e);
                }
            });

            // When the browser gets a result, put it in the input box
            recognition.addEventListener('result', (event) => {
                const transcript = event.results[0][0].transcript;
                kbChatInput.value = transcript;
            });

        } else {
            // If the browser doesn't support it, hide the button.
            console.log("Speech Recognition not supported in this browser.");
            kbMicButton.style.display = 'none';
        }

        const setupChat = (formId, inputId, historyContainerId, sendButtonId, _placeholder, chatHistoryRef) => {
            const form = document.getElementById(formId);
            const input = document.getElementById(inputId);
            const historyContainer = document.getElementById(historyContainerId);
            const sendButton = document.getElementById(sendButtonId);

            const sendMessage = async (prompt) => {
                if (prompt.trim().toLowerCase() === 'stop roleplay') {
                    try {
                        const { data: { session } } = await supabaseClient.auth.getSession();
                        const response = await fetch('/api/roleplay-feedback', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                                'Authorization': `Bearer ${session.access_token}`
                            },
                            body: JSON.stringify({ 
                                history: chatHistoryRef,
                                persona: "Dr. Evelyn Reed", 
                                topic: "Handling cost objections" 
                            })
                        });
                        const result = await response.json();
                        if (!response.ok) throw new Error(result.error);

                        alert("Feedback generated and saved to Coaching Tips!");
                        showPage('coaching-tips-page');
                    } catch (error) {
                        alert(`Could not generate feedback: ${error.message}`);
                    }
                    return;
                }

                const sendButtonIcon = sendButton.innerHTML;
                sendButton.innerHTML = `<div class="w-6 h-6 border-t-2 border-white border-solid rounded-full animate-spin"></div>`;
                sendButton.disabled = true;
                input.disabled = true;

                if (chatHistoryRef.length === 0 || (chatHistoryRef.length > 0 && chatHistoryRef[chatHistoryRef.length - 1].role !== 'system')) {
                    appendMessage(prompt, 'user', historyContainer);
                }
                chatHistoryRef.push({ role: "user", parts: [{ text: prompt }] });
                
                try {
                    const { data: { session } } = await supabaseClient.auth.getSession();
                    if (!session) {
                        alert("You must be logged in to chat.");
                        return;
                    }

                    const apiUrl = "/api/chat";
                    const payload = { history: chatHistoryRef };
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${session.access_token}`
                        },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        const errorData = await response.json();
                        throw new Error(errorData.error || `API request failed with status ${response.status}`);
                    }
                    const result = await response.json();
                    if (result.text) {
                        const aiResponse = result.text;
                        chatHistoryRef.push({ role: "model", parts: [{ text: aiResponse }] });
                        appendMessage(aiResponse, 'ai', historyContainer);
                    } else {
                        appendMessage("I couldn't generate a response. Please try again.", 'ai', historyContainer);
                    }
                } catch (error) { 
                    console.error("Error sending message:", error);
                    appendMessage(`Error: ${error.message}. Please try again.`, 'ai', historyContainer);
                } finally {
                    sendButton.innerHTML = sendButtonIcon;
                    sendButton.disabled = false;
                    input.disabled = false;
                    input.focus();
                }
            };

            if (form) {
                form.addEventListener('submit', (event) => {
                    event.preventDefault();
                    const userMessage = input.value.trim();
                    if (userMessage) {
                        sendMessage(userMessage);
                        input.value = '';
                    }
                });
            }
        };

        const appendMessage = (text, role, container) => {
            if (!container) return;
            const messageDiv = document.createElement('div');
            messageDiv.className = `chat-bubble ${role === 'user' ? 'user-bubble' : 'ai-bubble'}`;
            messageDiv.textContent = text;
            container.appendChild(messageDiv);
            container.scrollTop = container.scrollHeight;
        };

        let kbChatHistory = [];
        let kbChatInitialized = false;
        let verbalizationChatHistory = [];
        let verbalizationChatInitialized = false;

        setupChat('kb-chat-form', 'kb-chat-input', 'kb-chat-history', 'kb-send-button', null, kbChatHistory);
        setupChat('verbalization-chat-form', 'verbalization-chat-input', 'verbalization-chat-history', 'verbalization-send-button', null, verbalizationChatHistory);

            const initKnowledgeBaseChat = () => {
                const systemPrompt = "You’re a medical educator helping me (a pharmaceutical sales rep) understand complex topics in a simple, professional way. I may ask about disease states, drug interactions, safety info, or biologic processes. Break it down clearly, use simple language, and help me sound smart and confident when I explain it to a doctor. Include professional phrases I can use in conversation. Use bullet points when helpful. Keep your answers concise and limit them to 2-3 paragraphs.";
                const welcomeMessage = "Welcome to SmartRepAI, what can I help you learn today?";
                
                kbChatHistory.push({ role: "user", parts: [{ text: systemPrompt }] });
                kbChatHistory.push({ role: "model", parts: [{ text: welcomeMessage }] });
                
                appendMessage(welcomeMessage, 'ai', document.getElementById('kb-chat-history'));
                kbChatInitialized = true;
            };
            
            const initVerbalizationChat = () => {
                const systemPrompt = "You are a pharmaceutical sales trainer helping a rep develop concise, compliant verbal messaging. Based on the provided topic or objection, you will:\n\n1. Draft a 2-point message.\n2. Suggest a powerful follow-up question.\n3. Explain why this phrasing is effective in a sales context.\n\nYour tone should be helpful, professional, and tailored to field-ready conversations. Be flexible if the user asks for other verbalization help.";
                const welcomeMessage = "Welcome to SmartRepAI, what can I help you verbalize today?";

                verbalizationChatHistory.push({ role: "user", parts: [{ text: systemPrompt }] });
                verbalizationChatHistory.push({ role: "model", parts: [{ text: welcomeMessage }] });

                appendMessage(welcomeMessage, 'ai', document.getElementById('verbalization-chat-history'));
                verbalizationChatInitialized = true;
            };

             const showToast = (message) => {
                successToast.textContent = message;
                successToast.classList.add('show');
                setTimeout(() => {
                    successToast.classList.remove('show');
                }, 3000);
            };

            // --- Field Question Submission ---
            const submitQuestionButton = document.getElementById('submit-question-button');
            const fieldQuestionForm = document.getElementById('field-question-form');
            submitQuestionButton.addEventListener('click', () => {
                const product = document.getElementById('q-product').value;
                const indication = document.getElementById('q-indication').value;
                const question = document.getElementById('q-details').value;
                console.log('Question Submitted:', { product, indication, question });
                showToast('Question submitted successfully!');
                fieldQuestionForm.reset();
            });

            // --- Coaching Tips ---
            const mockCoachingData = [
                { id: 1, date: '2025-06-15', persona: 'Dr. Evelyn Reed', topic: 'Handling cost objections', feedback: '• Great job staying positive.\n• Try to pivot to value earlier in the conversation.\n• Instead of saying "I understand the cost is high," try framing it as "I understand budget is a key consideration, which is why focusing on the long-term value and patient outcomes is so important."' },
                { id: 2, date: '2025-06-12', persona: 'Dr. John Smith', topic: 'Introducing a new therapy', feedback: '• Your opening was strong and confident.\n• Remember to ask an open-ended question after presenting the efficacy data to encourage dialogue. For example: "With this level of efficacy, what type of patient comes to mind?"' },
                { id: 3, date: '2025-06-14', persona: 'Dr. Chen', topic: 'Discussing competitor data', feedback: '• Excellent use of data to support your points.\n• To be even more impactful, summarize the key takeaway in one sentence before diving into the numbers. For example, "The key differentiator we see is in patient adherence, which I can show you now."' },
            ];
            
            const populateCoachingTips = (sortOrder = 'newest') => {
                const listContainer = document.getElementById('coaching-tips-list');
                listContainer.innerHTML = '';
                const sortedData = [...mockCoachingData].sort((a, b) => {
                    const dateA = new Date(a.date);
                    const dateB = new Date(b.date);
                    return sortOrder === 'newest' ? dateB - dateA : dateA - dateB;
                });
                
                sortedData.forEach(item => {
                    const card = document.createElement('a');
                    card.href = '#';
                    card.className = 'block bg-card-bg text-card-text p-4 rounded-xl shadow-md hover:opacity-90 transition-opacity';
                    card.dataset.target = 'feedback-details-page';
                    card.dataset.feedbackId = item.id;
                    card.innerHTML = `
                        <div class="flex justify-between items-center mb-1">
                            <h3 class="font-bold">${item.persona}</h3>
                            <p class="text-sm text-gray-500">${new Date(item.date).toLocaleDateString()}</p>
                        </div>
                        <p class="text-gray-600">${item.topic}</p>
                    `;
                    card.addEventListener('click', (e) => {
                        e.preventDefault();
                        const feedback = mockCoachingData.find(d => d.id == item.id);
                        document.getElementById('feedback-title').textContent = `Feedback for ${feedback.persona}`;
                        document.getElementById('feedback-date').textContent = `Session from ${new Date(feedback.date).toLocaleDateString()}`;
                        document.getElementById('feedback-content').textContent = feedback.feedback;
                        showPage('feedback-details-page');
                    });
                    listContainer.appendChild(card);
                });
            };
            
            document.getElementById('sort-coaching-tips').addEventListener('change', (e) => {
                populateCoachingTips(e.target.value);
            });
            
            // --- Settings Page Logic ---
            const themeToggleButton = document.getElementById('theme-toggle-button');
            if (themeToggleButton) {
                themeToggleButton.addEventListener('click', () => {
                    const currentTheme = document.body.getAttribute('data-theme');
                    if (currentTheme === 'light') {
                        document.body.setAttribute('data-theme', 'dark');
                    } else {
                        document.body.setAttribute('data-theme', 'light');
                    }
                });
            }
            
            const setupSuggestionButtons = () => {
                const suggestionButtons = document.querySelectorAll('.suggestion-btn');
                suggestionButtons.forEach(button => {
                    button.addEventListener('click', () => {
                        const targetId = button.dataset.target;
                        const targetTextarea = document.getElementById(targetId);
                        if(targetTextarea) {
                           targetTextarea.value = button.textContent;
                        }
                    });
                });
            };
            setupSuggestionButtons();

            const savePersonalizationButton = document.getElementById('save-personalization');
            savePersonalizationButton?.addEventListener('click', () => {
                const personalization = {
                    personality: document.getElementById('ai-personality').value,
                    delivery: document.getElementById('info-delivery').value,
                    name: document.getElementById('user-name').value,
                    experience: document.getElementById('user-experience').value,
                    style: document.getElementById('selling-style').value,
                };
                console.log('Personalization settings saved:', personalization);
                showToast('Personalization saved!');
            });
        });
    </script>
</body>
</html>
